{"ast":null,"code":"import{useEffect,useState}from\"react\";import axios from\"axios\";import{createPost,getPosts}from\"../api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Admin(){const[posts,setPosts]=useState([]);const[title,setTitle]=useState(\"\");const[category,setCategory]=useState(\"\");const[content,setContent]=useState(\"\");const[image,setImage]=useState(null);useEffect(()=>{getPosts().then(res=>setPosts(res.data));},[]);const handleSubmit=async e=>{e.preventDefault();const data=new FormData();data.append(\"title\",title);data.append(\"category\",category);data.append(\"content\",content);if(image)data.append(\"image\",image);await createPost(data);alert(\"Post created!\");getPosts().then(res=>setPosts(res.data));};const handleDelete=async id=>{await axios.delete(`http://localhost:5000/api/posts/${id}`);getPosts().then(res=>setPosts(res.data));};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold\",children:\"Admin Dashboard\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"flex flex-col space-y-4 my-4 border p-4 rounded\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"border p-2\",type:\"text\",placeholder:\"Title\",onChange:e=>setTitle(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{className:\"border p-2\",type:\"text\",placeholder:\"Category\",onChange:e=>setCategory(e.target.value)}),/*#__PURE__*/_jsx(\"textarea\",{className:\"border p-2\",placeholder:\"Content\",onChange:e=>setContent(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:e=>setImage(e.target.files[0])}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-orange-600 text-white py-2 rounded\",children:\"Add Post\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl mb-2\",children:\"Posts\"}),posts.map(p=>/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded p-2 flex justify-between items-center my-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:p.title}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(p._id),className:\"bg-red-600 text-white px-2 py-1 rounded\",children:\"Delete\"})]},p._id))]})]});}","map":{"version":3,"names":["useEffect","useState","axios","createPost","getPosts","jsx","_jsx","jsxs","_jsxs","Admin","posts","setPosts","title","setTitle","category","setCategory","content","setContent","image","setImage","then","res","data","handleSubmit","e","preventDefault","FormData","append","alert","handleDelete","id","delete","className","children","onSubmit","type","placeholder","onChange","target","value","files","map","p","onClick","_id"],"sources":["D:/animal-science-blog/frontend/src/pages/Admin.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { createPost, getPosts } from \"../api\";\r\n\r\nexport default function Admin() {\r\n  const [posts, setPosts] = useState([]);\r\n  const [title, setTitle] = useState(\"\");\r\n  const [category, setCategory] = useState(\"\");\r\n  const [content, setContent] = useState(\"\");\r\n  const [image, setImage] = useState(null);\r\n\r\n  useEffect(() => {\r\n    getPosts().then((res) => setPosts(res.data));\r\n  }, []);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const data = new FormData();\r\n    data.append(\"title\", title);\r\n    data.append(\"category\", category);\r\n    data.append(\"content\", content);\r\n    if (image) data.append(\"image\", image);\r\n\r\n    await createPost(data);\r\n    alert(\"Post created!\");\r\n    getPosts().then((res) => setPosts(res.data));\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    await axios.delete(`http://localhost:5000/api/posts/${id}`);\r\n    getPosts().then((res) => setPosts(res.data));\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <h1 className=\"text-2xl font-bold\">Admin Dashboard</h1>\r\n\r\n      <form\r\n        onSubmit={handleSubmit}\r\n        className=\"flex flex-col space-y-4 my-4 border p-4 rounded\"\r\n      >\r\n        <input\r\n          className=\"border p-2\"\r\n          type=\"text\"\r\n          placeholder=\"Title\"\r\n          onChange={(e) => setTitle(e.target.value)}\r\n        />\r\n        <input\r\n          className=\"border p-2\"\r\n          type=\"text\"\r\n          placeholder=\"Category\"\r\n          onChange={(e) => setCategory(e.target.value)}\r\n        />\r\n        <textarea\r\n          className=\"border p-2\"\r\n          placeholder=\"Content\"\r\n          onChange={(e) => setContent(e.target.value)}\r\n        />\r\n        <input type=\"file\" onChange={(e) => setImage(e.target.files[0])} />\r\n        <button className=\"bg-orange-600 text-white py-2 rounded\">\r\n          Add Post\r\n        </button>\r\n      </form>\r\n\r\n      <div>\r\n        <h2 className=\"text-xl mb-2\">Posts</h2>\r\n        {posts.map((p) => (\r\n          <div\r\n            key={p._id}\r\n            className=\"border rounded p-2 flex justify-between items-center my-2\"\r\n          >\r\n            <span>{p.title}</span>\r\n            <button\r\n              onClick={() => handleDelete(p._id)}\r\n              className=\"bg-red-600 text-white px-2 py-1 rounded\"\r\n            >\r\n              Delete\r\n            </button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}